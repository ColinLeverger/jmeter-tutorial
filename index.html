<!doctype html>
<html lang="en">

<head>
	<meta charset="utf-8">

	<title>Another JMeter tutorial</title>

	<meta name="description" content="Another tutorial about JMeter">
	<meta name="author" content="ColinLeverger">

	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

	<link rel="stylesheet" href="css/reveal.css">
	<link rel="stylesheet" href="css/theme/green.css" id="theme">

	<!-- Code syntax highlighting -->
	<link rel="stylesheet" href="lib/css/zenburn.css">

	<!-- Printing and PDF exports -->
	<script>
		var link = document.createElement( 'link' );
		link.rel = 'stylesheet';
		link.type = 'text/css';
		link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
		document.getElementsByTagName( 'head' )[0].appendChild( link );
	</script>

        <!--[if lt IE 9]>
        <script src="lib/js/html5shiv.js"></script>
        <![endif]-->
    </head>

    <body>

    	<div class="reveal">


    		<!-- Any section element inside of this container is displayed as a slide -->
    		<div class="slides">

    			<section>
    				<h1>JMeter</h1>
    				<h3 style="color: #222;">An Opensource Load Testing tool</h3>
    				<a href="http://jmeter.apache.org/" target="blank">JMeter</a>
    				<p><a href="http://colinleverger.fr" target="blank">Colin LEVERGER</a></p>

    				<p>
    					<a href="https://github.com/ColinLeverger" target="blank"><img class="frontpage" src="img/github-logo.png"/></a>
    					<a href="mailto:colinleverger@gmail.com" target="blank"><img class="frontpage" src="img/mail-logo.png"/></a>
    					<a href="https://plus.google.com/+ColinLeverger" target="blank"><img class="frontpage" src="img/googleplus-logo.png"/></a>
    					<a href="https://linkedin.com/in/colinleverger" target="blank"><img class="frontpage" src="img/linkedin-logo.png"/></a>
    				</p>

    				<p><small>15 February 2016</small></p>
    			</section>

    			<section>
    				<section id="sum">
    					<h2>Summary</h2>  
    					<ol style="list-style-type:none"><li>
    						<li><a href="#/why">1.</a> Why JMeter?</li>
    						<li><a href="#/funct">2.</a> JMeter functionalities</li>
    						<li><a href="#/install">3.</a> Installation & configuration</li>
    						<li><a href="#/case1">4.</a> Case studies: PrimesUI</li>
    						<li><a href="#/further">5.</a> Going further</li>
    					</ol> 
    				</section>
    			</section>
    			<section>
    				<section>
    					<p>This is a relatively short tutorial to JMeter tool</p>
    					<p>The aim is to give an overview of the tool - it will not cover everything</p>
    					<p>We will focus here on using the GUI, it is still possible to use CLI only</p>
    				</section>  
    			</section>

    			<section id="why">
    				<section>
    					<h2><a href="#/sum">1.</a> Why JMeter?</h2>
    				</section>
    				<section>
    					<h3>Pros</h3>
    					<ul>
    						<li>Free & Opensource Load Test tool</li>
    						<li>Java app - run on any system with Java</li>
    						<li>GUI</li>
    						<li>Work with many protocols / lots of plugins for almost everything</li>
    						<li>Distributed testing is possible</li>
    						<li>Widely used & approved</li>
    					</ul>
    				</section>
    				<section>
    					<h3>Cons</h3>
    					<ul>
    						<li>You can only test web app</li>
    						<li>High consumption of memory with GUI (warning: <a href="https://en.wikipedia.org/wiki/Uncertainty_principle">Heisenberg's Uncertainty Principle</a>)</li>
    						<li>Doc is not exhaustive</li>
    						<li>It is sometimes hard to follow too complex scenarios</li>
    					</ul>
    				</section>
    			</section>
    			<section id="funct">
    				<section>
    					<h2><a href="#/sum">2.</a> JMeter functionalities</h2>
    				</section>

    				<section>
    					<h3>Supported protocols</h3>
    					<ul>
    						<li>Web - HTTP, HTTPS</li>
    						<li>SOAP / REST</li>
    						<li>FTP</li>
    						<li>Database via JDBC</li>
    						<li>LDAP</li>
    						<li>Message-oriented middleware (MOM) via JMS</li>
    						<li>Mail - SMTP(S), POP3(S) and IMAP(S)</li>
    						<li>MongoDB (NoSQL)</li>
    						<li>Native commands or shell scripts</li>
    						<li>TCP</li>
    					</ul>
    				</section>

    				<section>
    					<h3>Recorder</h3>

    					<p>It is possible to record scenarios: simply browse your website with your web browser configured with JMeter, and replay your recorded scenarios with hundreds of VUSers.</p>
    				</section>
    				<section>
    					<h3>Reports & listener</h3>

    					<ul>
    						<li>Automatic report generation</li>
    						<li>Add & delete listeners easily with GUI</li>
    						<li>One listener = one way to vizualise data from test</li>
    						<li>With graphs and metrics, it is easier to analyse and understand the possible problems</li>
    					</ul>

    				</section>
    				<section>
    					<h4>Possible listener output in JMeter</h4>
    					<img src="img/report.jpg">
    				</section>
    			</section>
    			<section id="install">
    				<section>
    					<h2><a href="#/sum">3.</a> Installation & configuration</h2>
    				</section>
    				<section>
    					<h3>Before reading further, you should:</h3>
    					
    					<ul>
    						<h4>For JMeter install itself:</h4>
    						<li>Have Java JVM > 1.6 on your machine</li>
    						<li>Have enough memory on your machine... (> 4 GB is better)</li><br>
    						<h4>To test JMeter, we will need:</h4>
    						<li>Docker installed & ready (see: <a href="http://www.docker.com">Docker</a>)</li>
    						<li>Git</li>
    					</ul>
    				</section>
    				<section>
    					<h3>Download links</h3>

    					<p>Official website: <a href="http://jmeter.apache.org/download_jmeter.cgi">jmeter.apache.org/download_jmeter.cgi</a></p>
    					<p>Download the latest binary in zip / tgz format</p>
    					<p><a href="http://apache.mirrors.ovh.net/ftp.apache.org/dist//jmeter/binaries/apache-jmeter-2.13.tgz">Direct Link (15 Feb 2016 - Version 2.13)</a></p>
    				</section>
    				<section>
    					<h3>Extract & execute</h3>

    					<h4>For Linux</h4>
    					<pre><code data-trim>
user : ~ > mkdir ~/Sandbox
user : ~ > cp Downloads/apache-jmeter-*.tgz ~/Sandbox/
user : ~ > cd Sandbox/
user : ~/Sandbox > tar -xvf apache-jmeter-*.tgz
user : ~/Sandbox > cd apache-jmeter-*/
user : ~/Sandbox > chmod 755 ./bin/jmeter
user : ~/Sandbox > ./bin/jmeter  #if you are using JMeter without proxy
user : ~/Sandbox > ./bin/jmeter -H proxy-addr -P proxy-port #with proxy
    					</code></pre>
    					<small><p><u>Note</u>: if your proxy is localhost, just use <code>-H localhost</code> (http://127.0.0.1 & http://localhost won't actually work...)</p></small>
    				</section>
    				<section>
    					<h4>For Windows</h4>
    					<ul>
    						<li>Unzip the previously downloaded archive</li>
    						<li>Go to bin/ directory</li>
    						<li>Double-click on <code data-trim>"jmeter.bat"</code></li>
    						<li>Done !</li>
    					</ul>

    					<p>If you are using a proxy:</p>
    					<pre><code data-trim>jmeter.bat -H proxy-addr -P proxy-port</code></pre>
    				</section>
    				<section>
    					<h3>JMeter interface</h3>

    					<img src="img/installOK.png"/>

    					<small>
    						<p><u>Troubleshooting</u>: see <a href="http://jmeter.apache.org/usermanual/get-started.html">jmeter.apache.org/usermanual/get-started.html</a></p>
    						<p><u>Need more configuration ? See</u>: <a href="http://jmeter.apache.org/usermanual/get-started.html#configuring_jmeter">configuration details</a></p>
    					</small>    					
    				</section>
    			</section>
    			<section id="case1">
    				<h2><a href="#/sum">4.</a> Case studies: PrimesUI</h2>  
    			</section>
    			<section>
    				<section>
    					<h2>Step 1. Setup PrimesUI</h2>  
    				</section>
    				<section>
    					<h3>About PrimesUI</h3>
    					<ul>
    						<li>App to test various langages & implementations efficiency</li>
    						<li>Playing with primes</li>
    						<li>GitHub page: <a href="https://github.com/dacr/dock-primesui">here</a></li>
    						<li>Dockerized environnement</li>
    					</ul> 
    					<p>Basically, we will hit an url with a certain number of VUsers to test the application</p>
    					<p>We will use this app to run our first JMeter test</p>
    				</section>  
    				<section>
    					<h3>Install PrimesUI</h3>  
    					<ul>
    						<li>Follow <a href="https://github.com/dacr/dock-primesui">github.com/dacr/dock-primesui</a></li>
    						<li>Run the following: <pre><code>curl http://localhost:8888/primesui/check</code></pre></li>
    						<li>This command should give you back some html code if primesui is ready</li>
    						<li>If you hit <code>http://127.0.0.1:8888/primesui/</code> with your favorite browser, you should see the following webpage (see below)</li>
    					</ul>
    				</section>
    				<section>
    					<h4>PrimesUI webpage</h4>
    					<img src="img/puipage.png">
    				</section>  
    			</section>
    			<section>
    				<section id="step2">
    					<h2>Step 2: Configure the JMeter recorder</h2>  
    				</section>
    				<section>
    					<h3>Principle</h3>
    					<p>You will now setup a proxy with JMeter and this proxy will record any action you have on PrimesUI:</p>
    					<ul>
    						<li>Click on a link</li>
    						<li>Reload the page</li>
    						<li>Download something (css, image, ...)</li>
    						<li>...</li>
    					</ul>
    					<p>You will be able afterward to replay all the recorded actions with VUsers</p>
    				</section>  
    				<section>
    					<h3>Let's get started!</h3>
    					<p>First, create a "Thread Group" by clicking right on "Test Plan"</p>
    					<img src="img/threadgroup.png">
    				</section>  
    				<section>
    					<ul>
    						<li>Right click on the new "Thread Group" and "Add/Config Element/HTTP Request Defaults"</li>
    						<li>Put the following "127.0.0.1" on the field "Server Name or IP" and "8888" on the field "Port Number"</li>
    					</ul>
    					<img src="img/httpdefault.png">
    				</section>  
    				<section>
    					<ul>
    						<li>Right click on "Thread Group" and "Add/Logic Controller/Recording Controller"</li>
    					</ul>
	   					<img src="img/recordingcontroller.png">
    					<ul>
    						<li>We now have the minimum requirements to record our actions on the stub website</li>
    					</ul>
    				</section>  
    				<section>
    					<ul>
    						<li>Then, right click on "WorkBench" and "Add/Non-Test Elements/HTTP(S) Test Script Recorder"</li>
    						<li>Configure the port of your proxy (I have chosen 7777 in this case)</li>
    						<li>Configure the Target Controller (Test Plan > Thread Group > Recording Controller)</li>
    						<li>Click on "Add  suggested Excludes"</li>
    					</ul>
    				</section>  
    				<section>
    					<h4>HTTP(S) Test Script Recorder Configuration (<a href="img/scriptrecorder.png">detailled image</a>)</h4>
    					<img src="img/scriptrecorder.png">
    				</section>
    				<section>
    					<p>Click on the Start button on the Script Recorder to start the recorder</p>
    				</section>
    			</section>
    			<section>
    				<section>
    					<h2>Step 3: Configure the web browser</h2>  
    				</section>
    				<section>
    					<h3>Principle</h3>
    					<ul>
    						<li>You will now setup your browser to make it communicate with webpages through your JMeter proxy previously set</li>
    						<li>You will be able afterward to play & record your test scenario</li>
    						<li>Browser used for this part: Firefox</li>
    					</ul>
    				</section>  
    				<section>
    					<h3>Let's get started!</h3>
    					<ul>
    						<li>First, open Firefox and go to "Preference/Advanced/Network"</li>
    						<li>On the section "Connection", click on "Settings" and setup your proxy (see below)</li>
    					</ul>
    				</section>  
    				<section>
    					<h4>Configure Firefox to use JMeter's proxy</h4>
    					<img src="img/firefoxconf1.png">
    				</section>  
    				<section>
    					<ul>
    						<li>To install the JMeter certificate in Firefox, go to "Preference/Advanced/Certificates", "View certificates" and "Import"</li>
    						<li><u>Tip</u>: the JMeters's self-signed certificates is in <code>%JMETER_HOME%/bin/</code></li>
    					</ul>
    				</section>      				
    				<section>
    					<h4>Install JMeter certificate</h4>
    					<img src="img/firefoxconf2.png">
    				</section>
    			</section>
    			<section>
    				<section>
    					<h2>And now, browse your app</h2>
    					<p>Good news everyone, your browser is now ready! Simply hit "http://127.0.0.1:8888/primesui/", browse the page, hit several times "http://127.0.0.1:8888/primesui/check", have some fun with urls...</p>
    				</section>  
    				<section>
    					<ul>
    						<li>When you have finished playing with the app, return to JMeter and click on the "Stop" button on the recorder</li>
    						<li>You should see that there is some newly recorded http requests under the "Recording Controller" (if not, please check your configuration / return to step <a href="#/step2">2</a>)</li>
    					</ul>
    					<img src="img/httprequests.png">
    				</section>
    			</section>
				<section>
    				<section>
    					<h2>Step 4: Replay your recorded test</h2>  
    				</section>
    				<section>
    					<h3>Principle</h3>
    					<ul>
    						<li>You will now replay your recorded test with 5 VUsers</li>
    					</ul>
    				</section>  
    				<section>
    					<h3>Let's get started!</h3>
    					<ul>
    						<li>First, click on "Thread Group" and:</li>
    							<ol>
    								<li>Set "Number Of Thread" to 5</li>
    								<li>Set "Loop Count" to 100</li>
    							</ol>
    						<li>When it is done, right click on "Thread Group" and "Add/Listener/View Results in Table"</li>
    					</ul>
    					<img src="img/testreplay1.png">
    				</section>
    				<section>
    					<h3>Hit "Start" to play your scenario</h3>
    					<img src="img/start.png">
    					<ul>
    						<li>You can now observe the result of your test with the listeners</li>
    						<ul>
    							<li>In real time</li>
    							<li>At the end of the test</li>
    						</ul>
    					</ul>
    					<p>See screenshot below</p>    					
    				</section>
    				<section>
    					<h4>Listeners output 1</h4>
    					<img src="img/listener1.png">			
    				</section>
    				<section>
                        <h4>Listeners output 2</h4>
    					<img src="img/listener2.png">    	
    				</section>
    			</section>
    			<section>
    				<section>
    					<h2>Build test without recorder</h2>  
    				</section>
    				<section>
    					<h3>Principle</h3>
    					<ul>
    						<li>You will now build a test from scratch without help from the recorder</li>
    						<li>All the URL you want to test will be configured directly by you</li>
    					</ul>
    				</section>  
    				<section>
    					<h3>Let's get started, with a new JMeter project!</h3>
    					<ul>
    						<li>First, close the actual project</li>
    						<li>Right click on "Test Plan" and "Add/Threads (Users)/Thread Group"</li>
    						<li>Right click on the new "Thread Group" and "Add/Config Element/HTTP Request Defaults"</li>
    						<li>Put the following "127.0.0.1" on the field "Server Name or IP" and "8888" on the field "Port Number"</li>
    						<li>Add a listener of your choice under "Thread Group"</li>
    					</ul>
    				</section>
    				<section>
    					<ul>
    						<li>Right click on "Thread Group" and "Add/Sampler/HTTP Request</li>
    						<ul>
    							<li>This will be the first URL of your test</li>
    							<li>You have to create this URL manually</li>
    						</ul>
    						<li>The URL we are interested in is /primesui/check : just put "/primesui/check" in "Path" field</li>
    						<li><u>Note</u>: The "HTTP Request Defaults" is the default "Server Name" and "Port Number" for every request under it / on the actual "Thread Group"</li>
    					</ul>
    				</section>
    				<section>
    					<h4>Manual HTTP Request</h4>

    					<img src="img/manualhttprequest.png">
    				</section>
    				<section>
    					<h3>Configure your VUsers</h4>
    					<ul>
    						<li>Click on "Thread Group" and configure:</li>
    						<ul>
    							<li>50 Threads (50 VUsers!)</li>
    							<li>100 Loops</li>
    						</ul> 
    					</ul>
    				</section>
    				<section>
    					<h3>Run your test and analyse output!</h4>
                        <p>In this configuration, each VUsers will basically hit /primesui/check a hundred times!</p>
    				</section>
    				<section>
    					<h3>Notes</h3>
    					<ul>
    						<li>You can create as much "HTTP Request" as you need</li>
    						<li>The "HTTP Request" are executed sequentially in the order they are on the "Thread Group"</li>
    						<li>To make the test more realistic, it can be useful to add "Timers" (Right click on "Thread Group", then "Add/Timer"</li>
    					</ul>
    				</section>
    			</section>
    			<section>
    				<section id="further">
    					<h2><a href="#/sum">5.</a> Going Further</h2>  
    				</section>
                    <section>
                        <h3>Want to practice?</h3>
                        <p><u>Take a look at</u>:</p>
                        <ul>
                            <li><a href="http://jmeter.apache.org/usermanual/build-adv-web-test-plan.html">Building an Advanced Web Test Plan</a> (JMeter official doc)</li>
                            <li><a href="http://www.tutorialspoint.com/jmeter/jmeter_best_practices.htm">JMeter - Best Practices</a></li>
                            <li><a href="http://www.javacodegeeks.com/2014/11/jmeter-tutorial-load-testing.html">Javacodegeeks tutorial</a></li>
                        </ul>
                    </section>
                    <section>
                        <h3>JMeter on SaaS</h3>
                        <ul>
                            <li>Blazemeter: <a href="https://blazemeter.com/">here</a></li>               
                            <li>OctoPerf: <a href="https://octoperf.com/">here</a></li>
                        </ul>
                        <p>Better interfaces & reports sexier, but theses tools are based on JMeter - no big news</p>
                    </section>
                    <section>
                        <h3>Other free tools</h3>
                        <ul>
                            <li>Gatling: <a href="https://gatling.io/">here</a></li>               
                            <ul>
                                <li>Scala written</li>
                                <li>Recorder available</li>
                                <li>Code writting with a Domain Specific Language (DSL)</li>
                                <li>Only Http/Https supported</li>
                            </ul>
                        </ul>
                        <p>The report generated is very precise and dynamic</p>
                        <p>Gatling is asynchronous => it is able to simulate a lot of VUs!</p>
                    </section>
    			</section>
    			<section>
    				<section>
    					<h2>The end</h2>  
    					<p>I hope you'll find this tutorial useful!</p>
    					<p><a href="#">#TOP</a></p>
    				</section>
    				<section>
    					<p><a href="mailto:colinleverger@gmail.com" target="blank">Any feedback?</a></p>
    					<p><a href="#">#TOP</a></p>
    				</section>
                    <section>
                        <h2>About me</h2>
                        <ul>
                            <li>Colin LEVERGER</li>
                            <li>Dev Scala, Java, Sys admin</li>
                            <li>DevOps & Continuous Integration lover</li>
                            <li>Web portfolio: <a href="http://colinleverger.fr" target="blank">http://colinleverger.fr</a></li>
                            <li>Github: <a href="https://github.com/ColinLeverger" target="blank">https://github.com/ColinLeverger</a></li>
                            <li>LinkedIn: <a href="https://linkedin.com/in/colinleverger" target="blank">https://linkedin.com/in/colinleverger</a></li>
                            <li><a href="mailto:colinleverger@gmail.com" target="blank">Get in touch! :)</a></li>
                        </ul>  
                    </section>  
    			</section>
    		</div>

    	</div>

    	<script src="lib/js/head.min.js"></script>
    	<script src="js/reveal.js"></script>

    	<script>

    		Reveal.initialize({

        // Display controls in the bottom right corner
        controls: true,

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: false,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Vertical centering of slides
        center: true,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // Hides the address bar on mobile devices
        hideAddressBar: true,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style
        transition: 'slide', // none/fade/slide/convex/concave/zoom

        // Transition speed
        transitionSpeed: 'default', // default/fast/slow

        // Transition style for full page slide backgrounds
        backgroundTransition: 'default', // none/fade/slide/convex/concave/zoom

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Parallax background image
        parallaxBackgroundImage: '', // e.g. "'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg'"

        // Parallax background size
        parallaxBackgroundSize: '', // CSS syntax, e.g. "2100px 900px"

        // Number of pixels to move the parallax background per slide
        // - Calculated automatically unless specified
        // - Set to 0 to disable movement along an axis
        parallaxBackgroundHorizontal: null,
        parallaxBackgroundVertical: null,

        // Optional reveal.js plugins
        dependencies: [
        { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
        { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
        { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
        { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
        { src: 'plugin/zoom-js/zoom.js', async: true },
        { src: 'plugin/notes/notes.js', async: true }
        ]
    });

</script>

</body>
</html>
